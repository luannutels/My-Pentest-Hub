#!/bin/bash
 
ALVO="$1"
EXT="$2"
RESULT=list.txt
 
if [[ "$1" == "" || "$2" == "" ]]
then
        echo "Modo de uso: $0 example.com.br pdf"
else
        lynx --dump "https://google.com/search?q=site:$ALVO+ext:$EXT" | grep ".$EXT" | cut -d "=" -f2 | egrep -v "site|google" | sed 's/...$//' > $RESULT
 
# -s file >>> True if file exists and has a size greater than zero.
if [ -s $RESULT ]
then
        echo "Arquivos encontrados"
        cat $RESULT
        echo ""
else
        echo "Nenhum arquivo encontrado!"
        echo "saindo..."
        exit
fi
 
echo "Iniciando Download..."
for url in $(cat $RESULT); do
        wget -q $url
done
 
echo ""
echo "Iniciando analise Metadados"
echo ""
exiftool *.$EXT
 
echo ""
echo "Limpeza"
rm -vf *.$EXT ; rm -vf $RESULT
 
fi
